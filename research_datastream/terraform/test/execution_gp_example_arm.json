{  
  "commands"  : [
    "runuser -l ec2-user -c 'cd /home/ec2-user/ngen-datastream && ./scripts/docker_builds.sh'",
    "runuser -l ec2-user -c 'hfsubset -w medium_range -s nextgen -v 2.1.1 -l divides,flowlines,network,nexus,forcing-weights,flowpath-attributes,model-attributes -o palisade.gpkg -t hl Gages-09106150'",
    "runuser -l ec2-user -c './scripts/stream.sh -s 202006200100 -e 202006210000 -C NWM_RETRO_V3 -d $(pwd)/data/datastream_test -g $(pwd)/palisade.gpkg -R $(pwd)/configs/ngen/realization_sloth_nom_cfe_pet.json -n 4'",
    "runuser -l ec2-user -c 'cd /home/ec2-user/ngen-datastream/docker && docker push awiciroh/datastream-deps:latest && docker push awiciroh/datastream:latest && docker push awiciroh/forcingprocessor:latest'"
],
"run_options":{
  "ii_detach_volume" : true,
  "check_s3"         : false
},
"instance_parameters" :
{
  "ImageId"            : "ami-0fd0b3e0199927973",
  "InstanceType"       : "t4g.large",
  "KeyName"            : "jlaser_west2",
  "SecurityGroupIds"   : ["sg-04365a4248fe126bc"],
  "IamInstanceProfile": {
    "Name": "datastream_ec2_role_lynkertest1"
  },
  "TagSpecifications"   :[
    {
        "ResourceType": "instance",
        "Tags": [
            {
                "Key"   : "Name",
                "Value" : "ds_test"
            }
        ]
    }
],
  "BlockDeviceMappings":[
    {
        "DeviceName": "/dev/xvda",  
        "Ebs": {
            "VolumeSize": 32,
            "VolumeType": "gp2"  
        }
    }
  ]
}
}